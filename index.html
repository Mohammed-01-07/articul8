<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Articul8 LexiSense</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
<style>*{margin:0;padding:0;box-sizing:border-box}:root{--bg1:#0077b6;--bg2:#00b4d8;--card:rgba(255,255,255,0.98);--text:#1f2937;--text2:#6b7280;--green:#00b4d8;--yellow:#fbbf24}body.dark{--bg1:#1a1a2e;--bg2:#16213e;--card:rgba(30,30,46,0.98);--text:#f9fafb;--text2:#d1d5db;--green:#00b4d8;--yellow:#f59e0b}body{font-family:-apple-system,BlinkMacSystemFont,sans-serif;background:linear-gradient(135deg,var(--bg1),var(--bg2));min-height:100vh;padding-bottom:80px;color:var(--text)}.header{background:rgba(0,0,0,0.3);padding:14px 16px;position:sticky;top:0;z-index:100}.header-inner{display:flex;justify-content:space-between;align-items:center;max-width:600px;margin:0 auto}.header-left{display:flex;align-items:center;gap:10px}.icon-btn{background:rgba(255,255,255,0.2);border:none;width:38px;height:38px;border-radius:50%;font-size:18px;cursor:pointer}.header h1{font-size:16px;font-weight:800;color:#fff}.xp-wrap{text-align:right;color:#fff;font-size:13px}.xp-bar{width:100px;height:4px;background:rgba(255,255,255,0.2);border-radius:2px;margin-top:4px}.xp-fill{height:100%;background:linear-gradient(90deg,var(--yellow),#f59e0b);border-radius:2px}.container{padding:14px;max-width:600px;margin:0 auto}.card{background:var(--card);border-radius:20px;padding:18px;margin-bottom:14px;box-shadow:0 8px 30px rgba(0,0,0,0.12)}.health-card{background:linear-gradient(135deg,var(--green),#0077b6);color:#fff;border-radius:20px;padding:20px;margin-bottom:14px}.health-score{font-size:52px;font-weight:800;text-align:center;margin:14px 0}.health-bar{width:100%;height:8px;background:rgba(255,255,255,0.3);border-radius:4px;margin:14px 0}.health-fill{height:100%;background:#fff;border-radius:4px}.title{font-size:16px;font-weight:800;margin-bottom:14px}.ach-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}.ach{background:rgba(0,180,216,0.1);padding:14px 6px;border-radius:14px;text-align:center;opacity:0.5}.ach.on{opacity:1;background:rgba(251,191,36,0.2);border:2px solid var(--yellow)}.ach-icon{font-size:26px;margin-bottom:4px}.ach-name{font-size:9px;font-weight:600}.chal{background:rgba(0,180,216,0.1);padding:12px;border-radius:12px;margin-bottom:8px}.chal-title{font-weight:700;font-size:13px;margin-bottom:3px}.chal-desc{font-size:11px;color:var(--text2);margin-bottom:6px}.chal-bar{height:5px;background:rgba(0,0,0,0.1);border-radius:3px}.chal-fill{height:100%;background:linear-gradient(90deg,var(--green),var(--bg2));border-radius:3px}.stats-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}.stat{background:linear-gradient(135deg,var(--green),#0077b6);padding:18px;border-radius:14px;text-align:center;color:#fff}.stat.orange{background:linear-gradient(135deg,#f59e0b,#d97706)}.stat-val{font-size:26px;font-weight:800;margin:6px 0}.stat-lbl{font-size:10px;opacity:0.9}.rec-btn{width:130px;height:130px;border-radius:50%;border:none;background:linear-gradient(135deg,var(--green),#0077b6);color:#fff;font-size:46px;display:flex;align-items:center;justify-content:center;margin:20px auto;box-shadow:0 8px 24px rgba(0,180,216,0.4);cursor:pointer}.rec-btn.on{background:linear-gradient(135deg,#ef4444,#dc2626);animation:pulse 1.5s infinite}@keyframes pulse{0%,100%{box-shadow:0 8px 24px rgba(239,68,68,0.4)}50%{box-shadow:0 8px 40px rgba(239,68,68,0.7)}}.db{font-size:38px;font-weight:800;text-align:center;color:var(--green);margin:14px 0}.input{width:100%;padding:12px;border:2px solid #e5e7eb;border-radius:12px;font-size:14px;margin-bottom:14px;background:#fff}body.dark .input{background:rgba(40,40,60,0.5);border-color:rgba(100,100,120,0.3);color:#f9fafb}.filter-row{display:flex;gap:6px;margin-bottom:14px;overflow-x:auto}.filter{padding:7px 14px;border-radius:18px;border:none;background:rgba(255,255,255,0.9);font-weight:600;font-size:12px;cursor:pointer}.filter.on{background:var(--green);color:#fff}.rec-card{background:var(--card);border-radius:16px;padding:14px;margin-bottom:10px;box-shadow:0 4px 16px rgba(0,0,0,0.08)}.rec-header{display:flex;justify-content:space-between;align-items:start;margin-bottom:10px}.rec-loc{font-weight:700;font-size:14px}.rec-time{font-size:11px;color:var(--text2);margin-top:2px}.db-badge{padding:5px 12px;border-radius:16px;color:#fff;font-weight:700;font-size:12px}.rec-stats{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:6px;margin-bottom:10px}.rec-stat{text-align:center;padding:8px;background:rgba(0,180,216,0.1);border-radius:10px}.rec-stat-lbl{font-size:9px;color:var(--text2)}.rec-stat-val{font-weight:700;font-size:12px;margin-top:2px}.btn-row{display:flex;gap:6px}.btn{flex:1;padding:10px;border:none;border-radius:10px;font-weight:700;font-size:12px;cursor:pointer;color:#fff}.btn-orange{background:linear-gradient(135deg,#f59e0b,#d97706)}.btn-red{background:linear-gradient(135deg,#ef4444,#dc2626)}.btn-green{background:linear-gradient(135deg,var(--green),#0077b6)}.btn-blue{background:linear-gradient(135deg,#3b82f6,#2563eb)}.btn-indigo{background:linear-gradient(135deg,#6366f1,#4f46e5)}.btn-pink{background:linear-gradient(135deg,#ec4899,#db2777)}.nav{position:fixed;bottom:0;left:0;right:0;background:var(--card);display:flex;justify-content:space-around;padding:6px 0 10px;box-shadow:0 -4px 16px rgba(0,0,0,0.08);z-index:100}.nav-item{display:flex;flex-direction:column;align-items:center;gap:2px;padding:5px 10px;border:none;background:none;color:#9ca3af;cursor:pointer}.nav-item.on{color:var(--green)}.nav-icon{font-size:20px}.nav-lbl{font-size:9px;font-weight:600}.hidden{display:none!important}.modal{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.7);display:flex;align-items:center;justify-content:center;z-index:1000;padding:16px}.modal-box{background:var(--card);border-radius:20px;padding:20px;max-width:360px;width:100%}.modal-title{font-size:18px;font-weight:800;margin-bottom:14px}.lang-grid{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:14px}.lang-btn{padding:8px 14px;border-radius:16px;border:2px solid rgba(0,180,216,0.2);background:rgba(0,180,216,0.1);font-weight:600;font-size:13px;cursor:pointer}.lang-btn.on{background:var(--green);border-color:var(--green);color:#fff}.sleep-card{background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff;padding:20px;border-radius:20px;margin-bottom:14px;text-align:center}.notif{position:fixed;top:65px;left:14px;right:14px;background:linear-gradient(135deg,var(--yellow),#f59e0b);color:#fff;padding:12px 16px;border-radius:14px;font-weight:700;z-index:200}.chart-box{height:180px;margin:14px 0}.h-row{display:flex;justify-content:space-between;padding:10px;border-radius:10px;margin-bottom:6px}.h-row.green{background:rgba(0,180,216,0.1)}.h-row.blue{background:rgba(59,130,246,0.1)}.h-row.red{background:rgba(239,68,68,0.1)}.profile-avatar{font-size:60px;text-align:center;margin-bottom:12px}.profile-name{font-size:20px;font-weight:800;text-align:center;margin-bottom:4px}.profile-sub{font-size:12px;color:var(--text2);text-align:center}.profile-stat{display:flex;justify-content:space-between;padding:10px;background:rgba(0,180,216,0.1);border-radius:10px;margin-bottom:6px}.comp-box{width:100%;height:10px;background:rgba(0,0,0,0.1);border-radius:5px;overflow:hidden}.comp-bar{height:100%;background:linear-gradient(90deg,var(--green),var(--bg2))}.ai-comp{border-radius:10px;padding:12px;background:rgba(0,180,216,0.1);margin-bottom:10px}.ai-dir{font-size:14px;font-weight:700;margin-bottom:4px}.ai-loc{font-size:11px;color:var(--text2)}.compass{width:100px;height:100px;border:3px solid var(--green);border-radius:50%;margin:10px auto;position:relative}.arrow{width:2px;height:45px;background:var(--green);position:absolute;top:50%;left:50%;transform-origin:0 0;transition:transform 0.5s}.arrow-dot{width:10px;height:10px;background:var(--green);border-radius:50%;position:absolute;top:45px;left:45px;transform:translate(-50%,-50%)}</style></head><body><div class="header"><div class="header-inner"><div class="header-left"><button class="icon-btn" onclick="app.toggleDark()" id="darkBtn">ğŸŒ™</button><button class="icon-btn" onclick="app.showLang()">ğŸŒ</button><h1 id="appTitle">ğŸ“š Articul8 LexiSense</h1></div><div class="xp-wrap"><div id="lvlText">Lvl 1 â€¢ 0 XP</div><div class="xp-bar"><div class="xp-fill" id="xpBar"></div></div></div></div></div><div id="notif" class="notif hidden"></div><div class="container"><div id="homeTab"></div><div id="recordTab" class="hidden"></div><div id="dataTab" class="hidden"></div><div id="analyticsTab" class="hidden"></div><div id="communityTab" class="hidden"></div><div id="profileTab" class="hidden"></div></div><div class="nav" id="nav"></div><div id="langModal" class="modal hidden" onclick="app.hideLang()"><div class="modal-box" onclick="event.stopPropagation()"><div class="modal-title" id="langTitle">Select Language</div><div class="lang-grid" id="langGrid"></div><button class="btn btn-green" style="width:100%" onclick="app.hideLang()" id="closeBtn">Close</button></div></div><div id="compModal" class="modal hidden" onclick="app.hideComp()"><div class="modal-box" onclick="event.stopPropagation()" id="compBox"></div></div><script>var T={en:{appTitle:"ğŸ“š Articul8 LexiSense",healthLabel:"LINGUISTIC VITALITY SCORE",healthStatus:"Excellent Proficiency",healthExp:"Today's focus: {0} minutes of deep work",achTitle:"ğŸ† Achievements",chalTitle:"ğŸ¯ Daily Challenges",statsTitle:"ğŸ“Š Your Discourse Metrics",sleepTitle:"Deep Focus Tracker",sleepDesc:"Monitor uninterrupted writing/reading sessions",sleepStart:"Start Focus Session",sleepStop:"End Session",recTitle:"ğŸ¤ Discourse Sampling",recStatus:"Tap to sample language",recording:"Analyzing Discourse...",locPh:"ğŸ“ Discourse Context (e.g. Essay Draft)",filterAll:"All",filterToday:"Today",filterWeek:"This Week",filterMonth:"This Month",noRecs:"No samples found",compare:"âš–ï¸ Compare",selected:"âœ“ Selected",del:"ğŸ—‘ï¸ Delete",cat:"Category",acc:"Accuracy",pass:"Passive",conf:"Confidence",dir:"Acoustic Loc.",total:"Total",recs:"Samples",streak:"Streak",days:"Days",distTitle:"ğŸ“ˆ Parts of Speech Distribution",trendTitle:"ğŸ“‰ Lexical Density Trends",healthTitle:"ğŸ“ Linguistic Benchmarks",exp:"ğŸ“¥ Export CSV",clear:"ğŸ—‘ï¸ Clear All",noData:"No data yet",noDataDesc:"Record some data to see analytics!",who:"Baseline L.D. Score",daytime:"Articulate Use",yourAvg:"Your L.D. Average",current:"Current",damage:"Complexity Threshold",threshold:"Advanced Proficiency",navHome:"Home",navRec:"Sample",navData:"Metrics",navAna:"Analysis",navComm:"Community",navProf:"Profile",langTitle:"Select Language",close:"Close",totalRecs:"Total Samples",avgNoise:"Avg L.D. Score",achUnlocked:"Achievements",hearingHealth:"Linguistic Vitality",settings:"âš™ï¸ Settings",changeLang:"Change Language",share:"Share App",comp:"ğŸ“Š Comparison",vs:"vs",analysis:"Discourse Analysis",louder:"higher",quieter:"lower",than:"than",internal:"â†©ï¸ Internal (Drafting)",forward:"â¡ï¸ Forward (Presentation)",ambient:"ğŸŒ Ambient (Research)",density:"L.D. Score"},ar:{appTitle:"ğŸ“š Ø¢Ø±ØªÙŠÙƒÙŠÙˆÙ„ÙŠØª Ù„ÙŠÙƒØ³ÙŠ Ø³ÙŠÙ†Ø³",healthLabel:"Ù†Ù‚Ø§Ø· Ø§Ù„Ø­ÙŠÙˆÙŠØ© Ø§Ù„Ù„ØºÙˆÙŠØ©",healthStatus:"Ø¥ØªÙ‚Ø§Ù† Ù…Ù…ØªØ§Ø²",healthExp:"ØªØ±ÙƒÙŠØ² Ø§Ù„ÙŠÙˆÙ…: {0} Ø¯Ù‚ÙŠÙ‚Ø© Ø¹Ù…Ù„ Ø¹Ù…ÙŠÙ‚",achTitle:"ğŸ† Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª",chalTitle:"ğŸ¯ Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª",statsTitle:"ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§ØªÙƒ Ø§Ù„Ù„ØºÙˆÙŠØ©",sleepTitle:"Ù…ØªØªØ¨Ø¹ Ø§Ù„ØªØ±ÙƒÙŠØ² Ø§Ù„Ø¹Ù…ÙŠÙ‚",sleepDesc:"Ø±Ø§Ù‚Ø¨ Ø¬Ù„Ø³Ø§Øª Ø§Ù„ÙƒØªØ§Ø¨Ø©/Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©",sleepStart:"Ø¨Ø¯Ø¡ Ø§Ù„Ø¬Ù„Ø³Ø©",sleepStop:"Ø¥ÙŠÙ‚Ø§Ù",recTitle:"ğŸ¤ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø®Ø·Ø§Ø¨",recStatus:"Ø§Ù†Ù‚Ø± Ù„Ø£Ø®Ø° Ø¹ÙŠÙ†Ø©",recording:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„...",locPh:"ğŸ“ Ø³ÙŠØ§Ù‚ Ø§Ù„Ø®Ø·Ø§Ø¨ (Ù…Ø«Ø§Ù„: Ù…Ø³ÙˆØ¯Ø© Ù…Ù‚Ø§Ù„)",filterAll:"Ø§Ù„ÙƒÙ„",filterToday:"Ø§Ù„ÙŠÙˆÙ…",filterWeek:"Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹",filterMonth:"Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±",noRecs:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹ÙŠÙ†Ø§Øª",compare:"âš–ï¸ Ù…Ù‚Ø§Ø±Ù†Ø©",selected:"âœ“ Ù…Ø­Ø¯Ø¯",del:"ğŸ—‘ï¸ Ø­Ø°Ù",cat:"Ø§Ù„ÙØ¦Ø©",acc:"Ø§Ù„Ø¯Ù‚Ø©",pass:"Ø§Ù„Ù…Ø¨Ù†ÙŠ Ù„Ù„Ù…Ø¬Ù‡ÙˆÙ„",conf:"Ø§Ù„Ø«Ù‚Ø©",dir:"ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ØµØ¯Ø±",total:"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ",recs:"Ø¹ÙŠÙ†Ø§Øª",streak:"Ø§Ù„Ø³Ù„Ø³Ù„Ø©",days:"Ø£ÙŠØ§Ù…",distTitle:"ğŸ“ˆ ØªÙˆØ²ÙŠØ¹ Ø£Ø¬Ø²Ø§Ø¡ Ø§Ù„ÙƒÙ„Ø§Ù…",trendTitle:"ğŸ“‰ Ø§ØªØ¬Ø§Ù‡Ø§Øª Ø§Ù„ÙƒØ«Ø§ÙØ© Ø§Ù„Ù…Ø¹Ø¬Ù…ÙŠØ©",healthTitle:"ğŸ“ Ø§Ù„Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ù„ØºÙˆÙŠØ©",exp:"ğŸ“¥ ØªØµØ¯ÙŠØ±",clear:"ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„",noData:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª",noDataDesc:"Ø³Ø¬Ù„ Ø¹ÙŠÙ†Ø§Øª Ù„Ø±Ø¤ÙŠØ© Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª!",who:"Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©",daytime:"Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¨Ù„ÙŠØº",yourAvg:"Ù…ØªÙˆØ³Ø·Ùƒ",current:"Ø§Ù„Ø­Ø§Ù„ÙŠ",damage:"Ø¹ØªØ¨Ø© Ø§Ù„ØªØ¹Ù‚ÙŠØ¯",threshold:"Ø¥ØªÙ‚Ø§Ù† Ù…ØªÙ‚Ø¯Ù…",navHome:"Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",navRec:"Ø¹ÙŠÙ†Ø©",navData:"Ø§Ù„Ù…Ù‚Ø§ÙŠÙŠØ³",navAna:"ØªØ­Ù„ÙŠÙ„",navComm:"Ø§Ù„Ù…Ø¬ØªÙ…Ø¹",navProf:"Ø§Ù„Ù…Ù„Ù",langTitle:"Ø§Ø®ØªØ± Ø§Ù„Ù„ØºØ©",close:"Ø¥ØºÙ„Ø§Ù‚",totalRecs:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹ÙŠÙ†Ø§Øª",avgNoise:"Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¯Ø±Ø¬Ø©",achUnlocked:"Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª",hearingHealth:"Ø§Ù„Ø­ÙŠÙˆÙŠØ© Ø§Ù„Ù„ØºÙˆÙŠØ©",settings:"âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",changeLang:"ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©",share:"Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚",comp:"ğŸ“Š Ù…Ù‚Ø§Ø±Ù†Ø©",vs:"Ù…Ù‚Ø§Ø¨Ù„",analysis:"ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø®Ø·Ø§Ø¨",louder:"Ø£Ø¹Ù„Ù‰",quieter:"Ø£Ù‚Ù„",than:"Ù…Ù†",internal:"â†©ï¸ Ø¯Ø§Ø®Ù„ÙŠ (Ù…Ø³ÙˆØ¯Ø©)",forward:"â¡ï¸ Ø£Ù…Ø§Ù…ÙŠ (Ø¹Ø±Ø¶)",ambient:"ğŸŒ Ù…Ø­ÙŠØ· (Ø¨Ø­Ø«)",density:"Ø¯Ø±Ø¬Ø© Ø§Ù„ÙƒØ«Ø§ÙØ© Ø§Ù„Ù…Ø¹Ø¬Ù…ÙŠØ©"},es:{appTitle:"ğŸ“š Articul8 LexiSense",healthLabel:"VITALIDAD LINGÃœÃSTICA",healthStatus:"Excelente",achTitle:"ğŸ† Logros",chalTitle:"ğŸ¯ DesafÃ­os",recTitle:"ğŸ¤ Muestreo",recStatus:"Toca para muestrear",recording:"Analizando...",locPh:"ğŸ“ Contexto del Discurso",filterAll:"Todo",filterToday:"Hoy",noRecs:"Sin muestras",compare:"âš–ï¸ Comparar",selected:"âœ“ Seleccionado",del:"ğŸ—‘ï¸ Eliminar",cat:"CategorÃ­a",acc:"PrecisiÃ³n",pass:"Voz Pasiva",conf:"Confianza",dir:"LocalizaciÃ³n",navHome:"Inicio",navRec:"Muestra",navData:"MÃ©tricas",navAna:"AnÃ¡lisis",navComm:"Comunidad",navProf:"Perfil",langTitle:"Idioma",close:"Cerrar",density:"Puntaje L.D."}};var app={lang:"en",dark:false,tab:"home",xp:0,level:1,streak:0,recs:[],filter:"all",compare:[],sleep:false,recording:false,stream:null,health:{score:100,exp:0},ach:{first:false,ten:false,quiet:false,loud:false,week:false,all:false},chal:{rec3:{done:false,p:0,t:3},quiet:{done:false,p:0,t:1},loud:{done:false,p:0,t:1}},t:function(k){return T[this.lang][k]||T.en[k]||k},init:function(){this.renderNav();this.renderHome();this.renderLangGrid()},notify:function(m){var n=document.getElementById("notif");n.textContent=m;n.classList.remove("hidden");setTimeout(function(){n.classList.add("hidden")},3000)},switchTab:function(t){this.tab=t;["home","record","data","analytics","community","profile"].forEach(function(x){document.getElementById(x+"Tab").classList.toggle("hidden",x!==t)});document.querySelectorAll(".nav-item").forEach(function(el,i){el.classList.toggle("on",["home","record","data","analytics","community","profile"][i]===t)});if(t==="home")this.renderHome();if(t==="record")this.renderRecord();if(t==="data")this.renderData();if(t==="analytics")this.renderAnalytics();if(t==="community")this.renderCommunity();if(t==="profile")this.renderProfile();},renderNav:function(){var self=this;var items=[{id:"home",icon:"ğŸ ",lbl:"navHome"},{id:"record",icon:"ğŸ¤",lbl:"navRec"},{id:"data",icon:"ğŸ“Š",lbl:"navData"},{id:"analytics",icon:"ğŸ“ˆ",lbl:"navAna"},{id:"community",icon:"ğŸŒ",lbl:"navComm"},{id:"profile",icon:"ğŸ‘¤",lbl:"navProf"}];document.getElementById("nav").innerHTML=items.map(function(x){return '<button class="nav-item'+(x.id==="home"?" on":"")+'" onclick="app.switchTab(\''+x.id+'\')"><div class="nav-icon">'+x.icon+'</div><div class="nav-lbl">'+self.t(x.lbl)+'</div></button>'}).join("");},renderHome:function(){var self=this;document.getElementById("appTitle").textContent=this.t("appTitle");document.getElementById("lvlText").textContent="Lvl "+this.level+" â€¢ "+this.xp+" XP";document.getElementById("xpBar").style.width=(this.xp/(this.level*100)*100)+"%";var achs=[{id:"first",icon:"ğŸ“",name:"First Discourse Sample"},{id:"ten",icon:"ğŸ“š",name:"Data Collector"},{id:"quiet",icon:"ğŸ¤«",name:"Syntactic Precision"},{id:"loud",icon:"ğŸ“¢",name:"Rhetorical Powerhouse"},{id:"week",icon:"ğŸ”¥",name:"Discourse Consistency"},{id:"all",icon:"ğŸŒŸ",name:"Linguistic Master"}];var achHtml=achs.map(function(a){return '<div class="ach'+(self.ach[a.id]?" on":"")+'"><div class="ach-icon">'+a.icon+'</div><div class="ach-name">'+a.name+'</div></div>'}).join("");var chals=[{id:"rec3",title:"Sample 3 Discourse Contexts",desc:"3 unique context samples"},{id:"quiet",title:"Achieve 95% Grammar Accuracy",desc:"High precision sample"},{id:"loud",title:"Achieve 85 L.D. Score",desc:"Rich, dense language"}];var chalHtml=chals.map(function(c){var ch=self.chal[c.id];var statusIcon=ch.done?"âœ…":"â­•"; 
return '<div class="chal"><div class="chal-title">'+statusIcon+" "+c.title+'</div><div class="chal-desc">'+c.desc+'</div><div style="display:flex;align-items:center;gap:8px"><div class="chal-bar" style="flex:1"><div class="chal-fill" style="width:'+(ch.p/ch.t*100)+'%"></div></div><span style="font-size:11px;font-weight:700">'+ch.p+"/"+ch.t+"</span></div></div>"}).join("");var statsHtml="";if(this.recs.length>0){statsHtml='<div class="card"><div class="title">'+this.t("statsTitle")+'</div><div class="stats-grid"><div class="stat"><div class="stat-lbl">'+this.t("total")+'</div><div class="stat-val">'+this.recs.length+'</div><div class="stat-lbl">'+this.t("recs")+'</div></div><div class="stat orange"><div class="stat-lbl">'+this.t("streak")+'</div><div class="stat-val">'+this.streak+' ğŸ”¥</div><div class="stat-lbl">'+this.t("days")+'</div></div></div></div>';}document.getElementById("homeTab").innerHTML='<div class="health-card"><div style="text-align:center;font-size:12px;opacity:0.9">'+this.t("healthLabel")+'</div><div class="health-score">'+this.health.score+'</div><div style="text-align:center;font-size:12px;opacity:0.9">'+this.t("healthStatus")+'</div><div class="health-bar"><div class="health-fill" style="width:'+this.health.score+'%"></div></div><div style="text-align:center;font-size:11px;opacity:0.9">'+this.t("healthExp").replace("{0}",Math.round(this.health.exp/60))+'</div></div><div class="card"><div class="title">'+this.t("achTitle")+'</div><div class="ach-grid">'+achHtml+'</div></div><div class="card"><div class="title">'+this.t("chalTitle")+'</div>'+chalHtml+'</div>'+statsHtml;},renderRecord:function(){var compassDeg=this.recording?Math.random()*360:0;var directionLabel=this.t("recStatus");if(this.recording){directionLabel=this.t("recording");}document.getElementById("recordTab").innerHTML='<div class="sleep-card"><div style="font-size:38px;margin-bottom:8px">ğŸ§ </div><div style="font-size:16px;font-weight:800;margin-bottom:4px">'+this.t("sleepTitle")+'</div><div style="font-size:12px;opacity:0.9;margin-bottom:12px">'+this.t("sleepDesc")+'</div><button class="btn" style="background:#fff;color:#3b82f6;width:100%" onclick="app.toggleSleep()">'+(this.sleep?'â¹ï¸ '+this.t("sleepStop"):'â–¶ï¸ '+this.t("sleepStart"))+'</button></div><div class="card"><div class="title">'+this.t("recTitle")+'</div><input type="text" class="input" id="locInput" placeholder="'+this.t("locPh")+'"><div class="compass" id="compass"><div class="arrow-dot"></div><div class="arrow" style="transform:rotate('+compassDeg+'deg)"></div></div><button class="rec-btn'+(this.recording?" on":"")+'" id="recBtn" onclick="app.toggleRec()">'+(this.recording?"â¹ï¸":"ğŸ“")+'</button><div class="db" id="dbDisplay">0 '+this.t("density")+'</div><div style="text-align:center;color:var(--text2);font-size:12px" id="recStatus">'+directionLabel+'</div></div>';},renderData:function(){var self=this;var filters=["all","today","week","month"];var filterHtml=filters.map(function(f){return '<button class="filter'+(self.filter===f?" on":"")+'" onclick="app.setFilter(\''+f+'\')">'+self.t("filter"+f.charAt(0).toUpperCase()+f.slice(1))+'</button>'}).join("");var filtered=this.getFiltered();var listHtml="";if(filtered.length===0){listHtml='<div class="card" style="text-align:center;padding:30px;color:var(--text2)">'+this.t("noRecs")+'</div>';}else{listHtml=filtered.map(function(r){return '<div class="rec-card" style="'+(self.compare.indexOf(r.id)>-1?"border:3px solid var(--green)":"")+'"><div class="rec-header"><div><div class="rec-loc">'+r.loc+'</div><div class="rec-time">ğŸ“… '+r.date+' â€¢ â° '+r.time+'</div></div><div class="db-badge" style="background:'+self.getColor(r.db)+'">'+r.db+' L.D.</div></div><div class="ai-comp"><div class="ai-dir">'+self.t(r.dir)+'</div><div class="ai-loc">AI Confidence: '+r.confidence+'%</div><div class="comp-box" style="margin-top:4px"><div class="comp-bar" style="width:'+r.confidence+'%"></div></div></div><div class="rec-stats"><div class="rec-stat"><div class="rec-stat-lbl">'+self.t("cat")+'</div><div class="rec-stat-val">'+r.cat+'</div></div><div class="rec-stat"><div class="rec-stat-lbl">'+self.t("acc")+'</div><div class="rec-stat-val">'+r.acc+'%</div></div><div class="rec-stat"><div class="rec-stat-lbl">'+self.t("pass")+'</div><div class="rec-stat-val">'+r.pass+'</div></div><div class="rec-stat"><div class="rec-stat-lbl">'+self.t("dir")+'</div><div class="rec-stat-val">'+self.t(r.dir)+'</div></div></div><div class="btn-row"><button class="btn btn-orange" onclick="app.toggleCompare('+r.id+')">'+(self.compare.indexOf(r.id)>-1?self.t("selected"):self.t("compare"))+'</button><button class="btn btn-red" onclick="app.deleteRec('+r.id+')">'+self.t("del")+'</button></div></div>'}).join("");}document.getElementById("dataTab").innerHTML='<div class="filter-row">'+filterHtml+'</div>'+listHtml;},setFilter:function(f){this.filter=f;this.renderData()},getFiltered:function(){var now=Date.now(),day=86400000;if(this.filter==="today")return this.recs.filter(function(r){return now-r.ts<day});if(this.filter==="week")return this.recs.filter(function(r){return now-r.ts<7*day});if(this.filter==="month")return this.recs.filter(function(r){return now-r.ts<30*day});return this.recs;},getColor:function(ld){if(ld<70)return"#3b82f6";if(ld<85)return"#84cc16";if(ld<95)return"#f59e0b";return"#ef4444"},toggleCompare:function(id){if(this.compare.indexOf(id)>-1){this.compare=this.compare.filter(function(x){return x!==id})}else if(this.compare.length<2){this.compare.push(id)}else{this.notify("Max 2");return}this.renderData();if(this.compare.length===2)this.showComp();},showComp:function(){var r1=this.recs.find(function(r){return r.id===app.compare[0]});var r2=this.recs.find(function(r){return r.id===app.compare[1]});if(!r1||!r2)return;document.getElementById("compBox").innerHTML='<div class="modal-title">'+this.t("comp")+'</div><div style="text-align:center;margin-bottom:14px"><div style="font-weight:700">'+r1.loc+'</div><div style="font-size:11px;color:var(--text2)">'+this.t("vs")+'</div><div style="font-weight:700">'+r2.loc+'</div></div><div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:14px"><div style="text-align:center;padding:10px;background:rgba(0,180,216,0.1);border-radius:10px"><div style="font-size:10px;color:var(--text2)">L.D.</div><div style="font-size:20px;font-weight:800;color:'+this.getColor(r1.db)+'">'+r1.db+'</div></div><div style="text-align:center;padding:10px;background:rgba(0,180,216,0.1);border-radius:10px"><div style="font-size:10px;color:var(--text2)">L.D.</div><div style="font-size:20px;font-weight:800;color:'+this.getColor(r2.db)+'">'+r2.db+'</div></div></div><div style="background:rgba(0,180,216,0.1);padding:10px;border-radius:10px;margin-bottom:14px"><div style="font-weight:700;margin-bottom:4px">'+this.t("analysis")+'</div><div style="font-size:12px;color:var(--text2)">'+r1.loc+' has a '+Math.abs(r1.db-r2.db).toFixed(0)+' point '+(r1.db>r2.db?this.t("louder"):this.t("quieter"))+' '+this.t("density")+' '+this.t("than")+' '+r2.loc+'</div></div><button class="btn btn-green" style="width:100%" onclick="app.hideComp()">'+this.t("close")+'</button>';document.getElementById("compModal").classList.remove("hidden");},hideComp:function(){document.getElementById("compModal").classList.add("hidden");this.compare=[];this.renderData()},deleteRec:function(id){if(confirm("Delete?")){this.recs=this.recs.filter(function(r){return r.id!==id});this.compare=this.compare.filter(function(x){return x!==id});this.renderData();this.notify("âœ… Deleted")}},renderAnalytics:function(){var self=this;if(this.recs.length===0){document.getElementById("analyticsTab").innerHTML='<div class="card" style="text-align:center;padding:30px"><div style="font-size:40px;margin-bottom:12px">ğŸ“Š</div><div style="font-size:16px;font-weight:800;margin-bottom:6px">'+this.t("noData")+'</div><div style="color:var(--text2)">'+this.t("noDataDesc")+'</div></div>';return;}var avg=(this.recs.reduce(function(s,r){return s+r.db},0)/this.recs.length).toFixed(1);document.getElementById("analyticsTab").innerHTML='<div class="card"><div class="title">'+this.t("distTitle")+'</div><div class="chart-box"><canvas id="pieChart"></canvas></div></div><div class="card"><div class="title">'+this.t("trendTitle")+'</div><div class="chart-box"><canvas id="lineChart"></canvas></div></div><div class="card"><div class="title">'+this.t("healthTitle")+'</div><div class="h-row green"><div><div style="font-weight:700">'+this.t("who")+'</div><div style="font-size:10px;opacity:0.8">'+this.t("daytime")+'</div></div><div style="font-size:18px;font-weight:800">65 L.D.</div></div><div class="h-row blue"><div><div style="font-weight:700">'+this.t("yourAvg")+'</div><div style="font-size:10px;opacity:0.8">'+this.t("current")+'</div></div><div style="font-size:18px;font-weight:800">'+avg+' L.D.</div></div><div class="h-row red"><div><div style="font-weight:700">'+this.t("damage")+'</div><div style="font-size:10px;opacity:0.8">'+this.t("threshold")+'</div></div><div style="font-size:18px;font-weight:800">95 L.D.</div></div></div><button class="btn btn-green" style="width:100%;padding:12px;margin-bottom:8px" onclick="app.exportCSV()">'+this.t("exp")+'</button><button class="btn btn-red" style="width:100%;padding:12px" onclick="app.clearAll()">'+this.t("clear")+'</button>';setTimeout(function(){self.renderCharts()},100);},renderCharts:function(){var pos={"Nouns":0,"Verbs":0,"Adjectives":0,"Adverbs":0,"Other":0};this.recs.forEach(function(r){pos["Nouns"]+=Math.round(r.db*0.6);pos["Verbs"]+=Math.round(r.db*0.4);pos["Adjectives"]+=Math.round(r.db*0.3);pos["Adverbs"]+=Math.round(r.db*0.2);pos["Other"]+=Math.round(r.db*0.1)});var total=Object.values(pos).reduce(function(a,b){return a+b},0);var labels=Object.keys(pos);var data=Object.values(pos).map(function(v){return (v/total*100).toFixed(1)});new Chart(document.getElementById("pieChart"),{type:"doughnut",data:{labels:labels,datasets:[{data:data,backgroundColor:["#ef4444","#f97316","#3b82f6","#00b4d8","#6b7280"]}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:"bottom"}}}});var trend=this.recs.slice().reverse().slice(0,10);new Chart(document.getElementById("lineChart"),{type:"line",data:{labels:trend.map(function(_,i){return"#"+(i+1)}),datasets:[{label:this.t("density"),data:trend.map(function(r){return r.db}),borderColor:var(--green),backgroundColor:"rgba(0,180,216,0.1)",tension:0.4,fill:true}]},options:{responsive:true,maintainAspectRatio:false,scales:{y:{beginAtZero:false,max:100,min:50}},plugins:{legend:{display:false}}}});},exportCSV:function(){var csv=[["Date","Time","Context","Category","L.D. Score","Accuracy %","Passive Voice Count","Direction","Confidence %"]].concat(this.recs.map(function(r){return[r.date,r.time,r.loc,r.cat,r.db,r.acc,r.pass,r.dir,r.confidence]})).map(function(row){return row.join(",")}).join("\n");var a=document.createElement("a");a.href="data:text/csv;charset=utf-8,"+encodeURIComponent(csv);a.download="lexisense.csv";a.click();this.notify("âœ… Exported!");},clearAll:function(){if(confirm("Delete ALL?")){this.recs=[];this.compare=[];this.renderAnalytics();this.renderHome();this.notify("âœ… Cleared")}},renderCommunity:function(){document.getElementById("communityTab").innerHTML='<div class="card" style="text-align:center;padding:30px"><div style="font-size:50px;margin-bottom:12px">ğŸŒ</div><div style="font-size:16px;font-weight:800;margin-bottom:6px">Global Discourse Map</div><div style="color:var(--text2)">Share samples to see global linguistic trends!</div></div>';},renderProfile:function(){var avg=this.recs.length>0?(this.recs.reduce(function(s,r){return s+r.db},0)/this.recs.length).toFixed(1):0;var unlocked=Object.values(this.ach).filter(function(a){return a}).length;document.getElementById("profileTab").innerHTML='<div class="card"><div class="profile-avatar">ğŸ“</div><div class="profile-name">Level '+this.level+' Linguistic Explorer</div><div class="profile-sub">'+this.xp+' XP â€¢ '+this.streak+' ğŸ”¥ Streak</div></div><div class="card"><div class="title">'+this.t("statsTitle")+'</div><div class="profile-stat"><span>'+this.t("totalRecs")+'</span><span style="font-weight:700;color:var(--bg2)">'+this.recs.length+'</span></div><div class="profile-stat"><span>'+this.t("avgNoise")+'</span><span style="font-weight:700;color:var(--green)">'+avg+' L.D.</span></div><div class="profile-stat"><span>'+this.t("achUnlocked")+'</span><span style="font-weight:700;color:var(--yellow)">'+unlocked+'/6</span></div><div class="profile-stat"><span>'+this.t("hearingHealth")+'</span><span style="font-weight:700;color:#ef4444">'+this.health.score+'</span></div></div><div class="card"><div class="title">'+this.t("settings")+'</div><button class="btn btn-green" style="width:100%;padding:12px;margin-bottom:8px" onclick="app.showLang()">ğŸŒ '+this.t("changeLang")+'</button><button class="btn btn-indigo" style="width:100%;padding:12px;margin-bottom:8px" onclick="app.toggleDark()">'+(this.dark?"â˜€ï¸":"ğŸŒ™")+' Dark Mode</button><button class="btn btn-pink" style="width:100%;padding:12px" onclick="app.notify(\'ğŸ“‹ Copied!\')">ğŸ“¤ '+this.t("share")+'</button></div>';},toggleDark:function(){this.dark=!this.dark;document.body.classList.toggle("dark",this.dark);document.getElementById("darkBtn").textContent=this.dark?"â˜€ï¸":"ğŸŒ™"},toggleSleep:function(){this.sleep=!this.sleep;this.renderRecord();this.notify(this.sleep?"ğŸ˜´ Focus mode on!":"â° Session ended")},toggleRec:function(){if(this.recording)return;var self=this;this.recording=true;this.renderRecord();document.getElementById("recStatus").textContent=this.t("recording");var compass=document.getElementById("compass");var arrow=compass?compass.querySelector(".arrow"):null;function updateCompass(){if(!self.recording)return;var newDeg=Math.random()*360;if(arrow)arrow.style.transform='rotate('+newDeg+'deg)';requestAnimationFrame(updateCompass);}updateCompass();setTimeout(function(){self.stopRec()},5000);},stopRec:function(){this.recording=false;var ld=55+Math.floor(Math.random()*45);var acc=80+Math.floor(Math.random()*20);var pass=Math.floor(Math.random()*10);var confidence=75+Math.floor(Math.random()*25);var cats=["Academic","Literary","Technical","Conversational","Informal","Formal"];var cat;if(ld>=85&&acc>=90){cat=cats[0]}else if(ld>=80&&acc>=85){cat=cats[1]}else if(ld>=75&&acc>=80){cat=cats[2]}else if(ld>=65&&acc>=75){cat=cats[5]}else if(ld>=60&&acc>=70){cat=cats[3]}else{cat=cats[4]}var direction;if(ld<70)direction="internal";else if(ld<85)direction="forward";else direction="ambient";var loc=document.getElementById("locInput")?document.getElementById("locInput").value:"";var rec={id:Date.now(),ts:Date.now(),date:new Date().toLocaleDateString(),time:new Date().toLocaleTimeString(),loc:loc||"Unnamed Context",cat:cat,db:ld,acc:acc,pass:pass,dir:direction,confidence:confidence};this.recs.unshift(rec);this.addXP(10);this.streak++;if(!this.ach.first){this.ach.first=true;this.addXP(50);this.notify("ğŸ† First Discourse Sample!")}if(!this.chal.rec3.done){this.chal.rec3.p++;if(this.chal.rec3.p>=3){this.chal.rec3.done=true;this.addXP(50)}}if(!this.chal.quiet.done&&acc>=95){this.chal.quiet.p=1;this.chal.quiet.done=true;this.addXP(30)}if(!this.chal.loud.done&&ld>=85){this.chal.loud.p=1;this.chal.loud.done=true;this.addXP(30)}if(ld<=60){this.health.exp+=5;this.health.score=Math.max(20,this.health.score-5)}this.notify("âœ… L.D. "+ld+" - "+cat);this.renderRecord();this.renderHome();},addXP:function(amt){this.xp+=amt;var need=this.level*100;if(this.xp>=need){this.level++;this.xp-=need;this.notify("ğŸ‰ Level "+this.level+"!")}document.getElementById("lvlText").textContent="Lvl "+this.level+" â€¢ "+this.xp+" XP";document.getElementById("xpBar").style.width=(this.xp/(this.level*100)*100)+"%";},showLang:function(){document.getElementById("langModal").classList.remove("hidden")},hideLang:function(){document.getElementById("langModal").classList.add("hidden")},renderLangGrid:function(){var self=this;var langs=[{c:"en",l:"ğŸ‡¬ğŸ‡§ English"},{c:"ar",l:"ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"},{c:"es",l:"ğŸ‡ªğŸ‡¸ EspaÃ±ol"}];document.getElementById("langGrid").innerHTML=langs.map(function(x){return '<button class="lang-btn'+(self.lang===x.c?" on":"")+'" onclick="app.setLang(\''+x.c+'\')">'+x.l+'</button>'}).join("");document.getElementById("langTitle").textContent=this.t("langTitle");document.getElementById("closeBtn").textContent=this.t("close");},setLang:function(l){this.lang=l;this.renderLangGrid();this.renderNav();this.renderHome();this.hideLang()}};app.init();</script></body></html>
